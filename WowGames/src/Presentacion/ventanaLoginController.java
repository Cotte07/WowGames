package Presentacion;

import java.io.IOException;

import BaseDatos.Datos;
import BaseDatos.Session;
import BaseDatos.Vendedores;
import MostrarVentanas.MostrarVentanaOpciones;
import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.control.Alert;
import javafx.scene.control.Button;

import javafx.scene.control.TextField;

import javafx.scene.input.MouseEvent;
import javafx.stage.Stage;


public class ventanaLoginController {
	@FXML
	private TextField contrasenaTxt;
	@FXML
	private TextField credencialTxt;
	@FXML
	private Button entrarBtn;
	private Datos dataprovider = new Datos();
	private MostrarVentanaOpciones mvo;

	// Event Listener on Button[#entrarBtn].onMouseClicked
	@FXML
	public void onEntrarClicked(MouseEvent event) {
		// TODO Autogenerated
		Vendedores user = dataprovider.login(credencialTxt.getText(), contrasenaTxt.getText());
		if(user !=null) {
			Session.setvendedor(user);
			Session.setAdmin(true);
			mvo = new MostrarVentanaOpciones((Stage)this.credencialTxt.getScene().getWindow() );
		}else {
			Alert alt = new Alert(Alert.AlertType.ERROR);
			alt.setContentText("credencial o contrase√±a errada");
			alt.setHeaderText("Error");
			alt.show();
		}
	}
}
